<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kislay | Notes</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="wrapper">
      <nav id="sidebar">
        <ul>
          <li>
            <a class="nav-link page-link" data-page="main">about</a>
          </li>
          <li>
            <a class="nav-link scroll-link" data-section="research">research</a>
            <ul class="sub-nav" id="research-subnav">
              <li>
                <a class="scroll-link" data-section="theoretical-rl"
                  >Theoretical RL</a
                >
              </li>
              <li>
                <a
                  class="scroll-link"
                  data-section="mechanistic-interperetability"
                  >Mechanistic Interpretability</a
                >
              </li>
              <li>
                <a class="scroll-link" data-section="rl-on-llms">RL on LLMs</a>
              </li>
            </ul>
          </li>
          <li>
            <a class="nav-link scroll-link" data-section="publications"
              >publications</a
            >
            <ul class="sub-nav" id="publications-subnav">
              <li><a class="scroll-link" data-section="year-2028">2028</a></li>
              <li><a class="scroll-link" data-section="year-2027">2027</a></li>
              <li><a class="scroll-link" data-section="year-2026">2026</a></li>
            </ul>
          </li>
          <li>
            <a class="nav-link scroll-link" data-section="contact">contact</a>
          </li>
          <li class="nav-separator">
            <a class="nav-link page-link" data-page="notes">notes</a>
          </li>
          <li>
            <a class="nav-link page-link" data-page="projects">projects</a>
          </li>
        </ul>

        <div class="theme-toggle-container">
          <button id="theme-toggle" class="theme-toggle">dark mode</button>
        </div>
      </nav>

      <main>
        <!-- Notes Page -->
        <div id="notes-page" class="page active">
          <header>
            <h1>Notes</h1>
            <p class="subtitle">
              Scattered thoughts and reflections. Click title to expand.
            </p>
          </header>

          <div id="notes-list">
            <ul class="note-list" id="notes-container">
              <!-- Notes loaded from backend files -->
            </ul>
          </div>

          <!-- Individual Note Views Container -->
          <div id="notes-full-container">
            <!-- Full note views loaded from backend files -->
          </div>

          <footer>
            <p>Last Updated - December, 2025</p>
          </footer>
        </div>
      </main>
    </div>

    <script src="script.js"></script>
    <script>
      // Load notes from backend files
      async function loadNotes() {
        const notesFiles = [
          '_backend_notes/reflections.html',
          '_backend_notes/books.html',
          '_backend_notes/movies_tier_list.html',
          '_backend_notes/anime_tier_list.html'
        ];

        const notesContainer = document.getElementById('notes-container');
        const fullContainer = document.getElementById('notes-full-container');

        for (const file of notesFiles) {
          try {
            const response = await fetch(file);
            const html = await response.text();
            
            // Parse the HTML to separate list items and full views
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            // Get all list items
            const listItems = doc.querySelectorAll('li');
            listItems.forEach(item => {
              notesContainer.appendChild(item.cloneNode(true));
            });
            
            // Get all full note divs
            const fullNotes = doc.querySelectorAll('.note-full');
            fullNotes.forEach(note => {
              fullContainer.appendChild(note.cloneNode(true));
            });
          } catch (error) {
            console.log('Note file not found or error loading:', file);
          }
        }
      }

      // Load notes when page loads
      document.addEventListener('DOMContentLoaded', loadNotes);
    </script>
  </body>
</html>
